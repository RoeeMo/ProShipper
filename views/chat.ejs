<%- include('./partials/base.ejs') %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js"></script>
<script> var serverData = { username: '<%= username %>' } </script>
<script src="/js/chat.js"></script>
<!-- <script src="/js/socket.js"></script> -->
<link rel="stylesheet" type="text/css" href="/css/chat.css"></link>
<div class="container-fluid">
    <div class="row">
      <div class="col-md-4">
        <div class="d-flex align-items-center justify-content-between">
          <h2 class="mb-0">Active Chats</h2>
          <div>
            <form class="form-inline" id="search-form">
              <div class="input-group">
                <input class="form-control" type="search" placeholder="Enter username" aria-label="Search" id="usernameInput">
                <div class="input-group-append">
                  <button class="btn btn-primary" onclick="initiateChat(event)">Start New Chat</button>
                </div>
              </div>
            </form>
          </div>
        </div>
        <ul class="list-group">
          <% if (active_chats_usernames){ %>
            <% active_chats_usernames.forEach(username => { %>
              <li class="list-group-item">
                <!-- <span class="chat-name" onclick="sendUsernameRequest('<%= username %>')"><%= username %></span> -->
              </li>
            <% }); %>
          <% } %>
        </ul>
      </div>
      <div class="col-md-8">
        <h2>Chat in Use</h2>
        <div id="messages-block">
          <!-- Chat messages -->
          <div class="message-container message-received">
            <span class="username">User1:</span>
            <span class="message-text">Hello!</span>
          </div>
          <div class="message-container message-sent">
            <span class="username">User2:</span>
            <span class="message-text">Hi, how are you?</span>
          </div>
          <div class="message-container message-sent">
            <span class="username">User2:</span>
            <span class="message-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</span>
          </div>
          <div class="message-container message-received">
            <span class="username">User1:</span>
            <span class="message-text">Nulla vitae elit libero, a pharetra augue.</span>
          </div>
        </div>
        <form>
          <div class="form-group mt-3">
            <input type="text" class="form-control" placeholder="Type your message">
          </div>
          <button type="submit" class="btn btn-primary">Send</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>